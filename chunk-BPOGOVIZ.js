import{a as R,b as u,c as D,d as k,e as G,f as v,h as M,i as T,j,o as P}from"./chunk-YDCFJKCP.js";import{a as _}from"./chunk-YK4R6DJK.js";import{a as E}from"./chunk-YVELGN4G.js";import{a as N}from"./chunk-B4TRIBHJ.js";import{Aa as x,E as s,J as g,K as p,N as t,O as o,P as f,R as S,W as i,ba as L,e as b,na as w,o as h,pa as C,s as a,sa as I,t as F,za as y}from"./chunk-6PQSHQPV.js";var d=class e{http=a(I);url=`${E.apiUrl}auth/`;login=n=>this.http.post(`${this.url}login`,n);static \u0275fac=function(l){return new(l||e)};static \u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"})};function O(e,n){e&1&&(t(0,"small",14),i(1," Email inv\xE1lido "),o())}function U(e,n){e&1&&(t(0,"small",14),i(1," La contrase\xF1a debe tener al menos 6 caracteres "),o())}var q=class e{userLocalService=a(N);loginService=a(d);toast=a(_);router=a(y);loginForm=new G({password:new v({value:"",disabled:!1},[u.required,u.minLength(6)]),email:new v({value:"",disabled:!1},[u.email,u.required])});login(){if(this.loginForm.invalid){this.toast.setToastPopup("Por favor, completa correctamente los campos.","error");return}this.toast.showModalLoading(),this.loginService.login(this.loginForm.value).subscribe({next:n=>b(this,null,function*(){this.toast.closeModalLoading(),this.userLocalService.saveToken(n.message),this.router.navigate(["/pages/tasks"])})})}static \u0275fac=function(l){return new(l||e)};static \u0275cmp=F({type:e,selectors:[["management-login"]],standalone:!0,features:[L],decls:22,vars:4,consts:[[1,"container","d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","shadow","p-4",2,"width","350px"],[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","placeholder","Ingresa tu email",1,"form-control"],["class","text-danger",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Ingresa tu contrase\xF1a",1,"form-control"],["type","submit",1,"btn","btn-success","w-100",3,"disabled"],[1,"text-center","mt-1"],[1,"btn","btn-link","p-0"],["routerLink","/public/signup"],[1,"text-danger"]],template:function(l,r){if(l&1&&(t(0,"div",0)(1,"div",1)(2,"h3",2),i(3,"Iniciar sesi\xF3n"),o(),t(4,"form",3),S("ngSubmit",function(){return r.login()}),t(5,"div",4)(6,"label",5),i(7,"Email"),o(),f(8,"input",6),g(9,O,2,0,"small",7),o(),t(10,"div",4)(11,"label",8),i(12,"Contrase\xF1a"),o(),f(13,"input",9),g(14,U,2,0,"small",7),o(),t(15,"button",10),i(16,"Ingresar"),o()(),t(17,"p",11),i(18," \xBFNo tienes cuenta? "),t(19,"button",12)(20,"a",13),i(21,"Reg\xEDstrate aqu\xED"),o()()()()()),l&2){let m,c;s(4),p("formGroup",r.loginForm),s(5),p("ngIf",((m=r.loginForm.get("email"))==null?null:m.invalid)&&((m=r.loginForm.get("email"))==null?null:m.touched)),s(5),p("ngIf",((c=r.loginForm.get("password"))==null?null:c.invalid)&&((c=r.loginForm.get("password"))==null?null:c.touched)),s(),p("disabled",r.loginForm.invalid)}},dependencies:[x,P,M,R,D,k,T,j,C,w]})};export{q as LoginComponent};
